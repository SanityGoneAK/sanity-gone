---
import Layout from "../../layouts/Layout.astro";
import OperatorFilters from "../../components/operator/OperatorFilters";
import operatorsJson from "../../../data/operators.json";
import type * as OutputTypes from "../../types/output-types";
import { slugify } from "../../utils/strings";
import { operatorPortrait } from "../../utils/images";
const operators = Object.values(operatorsJson) as OutputTypes.Operator[];
---

<Layout title="Operator List">
    <section class="max-w-[1280px] mx-auto">
        <div class="flex justify-between">
            <h1 class="text-base not-italic font-normal leading-4 text-neutral-100">Operators</h1>
            <OperatorFilters client:visible/>
        </div>
        <ul class="grid p-0 grid-cols-[repeat(auto-fill,_minmax(150px,_1fr))] list-none gap-x-2 gap-y-4">
            {
                operators.map((op) => {
                    const [charName, alterName] = op.name.en_US.split(/\sthe\s/i);

                    return (
                        <li class="w-[160px] h-[280px]">
                            <a
                                href={`/operators/${slugify(op.name.en_US)}`}
                                class="flex flex-col-reverse gap-y-2 text-neutral-100 relative"
                            >
                                <div class="absolute w-full h-full flex items-end z-20">
                                    <p>{charName} {alterName && ` the ${alterName}`}</p>
                                </div>
                                <div class="absolute bg-gradient-to-b from-[transparent] to-neutral-500 w-full h-56"></div>
                                <img alt="" src={operatorPortrait(op.charId)}/>
                            </a>
                        </li>
                    );
                })
            }
        </ul>
    </section>
</Layout>
